echo "=== Welcome to the Carnotzet bootloader ==="

setenv bootmenu_0 "Normal boot=run boot_normal_cmd"
setenv bootmenu_1 "Rescue boot=run boot_rescue_cmd" 
setenv bootmenu_delay 5

setenv boot_normal_cmd '\
echo "=== NORMAL BOOT ==="; \
fatload mmc 0:1 ${kernel_addr_r} Image; \
setenv bootargs "console=serial0,115200 console=tty1 root=/dev/mmcblk0p2 rw rootwait"; \
booti ${kernel_addr_r} - ${fdt_addr}'

setenv boot_rescue_cmd '\
echo "=== RESCUE BOOT ==="; \
fatload mmc 0:1 ${kernel_addr_r} Image; \
fatload mmc 0:1 ${ramdisk_addr_r} rescue.cpio.gz; \
setenv bootargs "console=serial0,115200 console=tty1 rw"; \
booti ${kernel_addr_r} ${ramdisk_addr_r} ${fdt_addr}'

bootmenu